
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tenpy.tools.misc module &#8212; TeNPy 0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="shortcut icon" href="../_static/logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tenpy.tools.optimization module" href="tenpy.tools.optimization.html" />
    <link rel="prev" title="tenpy.tools.math module" href="tenpy.tools.math.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.optimization.html" title="tenpy.tools.optimization module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.math.html" title="tenpy.tools.math module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TeNPy 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tenpy.html" >Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="tenpy.tools.html" accesskey="U">tenpy.tools package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-tenpy.tools.misc">
<span id="tenpy-tools-misc-module"></span><h1>tenpy.tools.misc module<a class="headerlink" href="#module-tenpy.tools.misc" title="Permalink to this headline">¶</a></h1>
<p>Miscellaneous tools, somewhat random mix yet often helpful.</p>
<dl class="function">
<dt id="tenpy.tools.misc.add_with_None_0">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">add_with_None_0</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#add_with_None_0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.add_with_None_0" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>, treating <cite>None</cite> as zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>a, b :</strong></dt>
<dd><p class="first last">The two things to be added, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sum :</strong></dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>, except if <cite>a</cite> or <cite>b</cite> is <cite>None</cite>, in which case the other variable is returned.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.any_nonzero">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">any_nonzero</code><span class="sig-paren">(</span><em>params</em>, <em>keys</em>, <em>verbose_msg=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#any_nonzero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.any_nonzero" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for any non-zero or non-equal entries in some parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">A dictionary of parameters.</p>
</dd>
<dt><strong>keys</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of {key | tuple of keys}</span></dt>
<dd><p class="first last">For a single key, check <code class="docutils literal notranslate"><span class="pre">params[key]</span></code> for non-zero entries.
For a tuple of keys, all the <code class="docutils literal notranslate"><span class="pre">params[key]</span></code> have to be equal (as numpy arrays).</p>
</dd>
<dt><strong>verbose_msg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None | str</span></dt>
<dd><p class="first last">If params[‘verbose’] &gt;= 1, we print <cite>verbose_msg</cite> before checking,
and a short notice with the <cite>key</cite>, if a non-zero entry is found.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>match</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first">False, if all params[key] are zero or <cite>None</cite> and
True, if any of the params[key] for single <cite>key</cite> in <cite>keys</cite>,</p>
<p class="last">of if any of the entries for a tuple of <cite>keys</cite></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.anynan">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">anynan</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#anynan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.anynan" title="Permalink to this definition">¶</a></dt>
<dd><p>check whether any entry of a ndarray <cite>a</cite> is ‘NaN’</p>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.argsort">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">argsort</code><span class="sig-paren">(</span><em>a</em>, <em>sort=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#argsort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.argsort" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper around np.argsort to allow sorting ascending/descending and by magnitude.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>a</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd><p class="first last">the array to sort</p>
</dd>
<dt><strong>sort</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal notranslate"><span class="pre">'m&gt;',</span> <span class="pre">'m&lt;',</span> <span class="pre">'&gt;',</span> <span class="pre">'&lt;',</span> <span class="pre">None</span></code></span></dt>
<dd><p class="first">Specify how the arguments should be sorted.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><cite>sort</cite></th>
<th class="head">order</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'m&gt;',</span> <span class="pre">'LM'</span></code></td>
<td>Largest magnitude first</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'m&lt;',</span> <span class="pre">'SM'</span></code></td>
<td>Smallest magnitude first</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'&gt;',</span> <span class="pre">'LR'</span></code></td>
<td>Largest real part first</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'&lt;',</span> <span class="pre">'SR'</span></code></td>
<td>Smallest real part first</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'LI'</span></code></td>
<td>Largest imaginary part first</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'Si'</span></code></td>
<td>Smallest imaginary part first</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
<td>numpy default: same as ‘&lt;’</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>**kwargs :</strong></dt>
<dd><p class="first last">further keyword arguments given directly to <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html#numpy.argsort" title="(in NumPy v1.16)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.argsort()</span></code></a>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>index_array</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, int</span></dt>
<dd><p class="first last">same shape as <cite>a</cite>, such that <code class="docutils literal notranslate"><span class="pre">a[index_array]</span></code> is sorted in the specified way.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.atleast_2d_pad">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">atleast_2d_pad</code><span class="sig-paren">(</span><em>a</em>, <em>pad_item=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#atleast_2d_pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.atleast_2d_pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform <cite>a</cite> into a 2D array, filling missing places with <cite>pad_item</cite>.</p>
<p>Given a list of lists, turn it to a 2D array (pad with 0), or turn a 1D list to 2D.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>a</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of lists</span></dt>
<dd><p class="first last">to be converted into ad 2D array.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>a_2D</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D ndarray</span></dt>
<dd><p class="first last">a converted into a numpy array.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">atleast_2d_pad</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[3, 4, 0]])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">atleast_2d_pad</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="go">array([[ 3.,  4.,  0.],</span>
<span class="go">       [ 1.,  6.,  7.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.build_initial_state">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">build_initial_state</code><span class="sig-paren">(</span><em>size</em>, <em>states</em>, <em>filling</em>, <em>mode='random'</em>, <em>seed=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#build_initial_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.build_initial_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Initial state builder. Uses two iterables (‘states’ and ‘filling’) to determine how to fill the
state. The two lists should have the same length as every element in ‘filling’ gives the filling
fraction for the corresponding state in ‘states’.</p>
<dl class="docutils">
<dt>Example:</dt>
<dd>size = 6, states = [0, 1, 2], filling = [1./3, 2./3, 0.]
n_states = size * filling = [2, 4, 0]
==&gt; Two sites will get state 0, 4 sites will get state 1, 0 sites will get state 2.</dd>
<dt>Args:</dt>
<dd><p class="first">size (int): length of state
states (tuple or list): Containing the possible local states
filling (tuple or list): Fraction of the total number of sites to get a certain state. If</p>
<blockquote>
<div>infinite fractions (e.g. 1/3) are needed, one should supply a fraction (1./3.)</div></blockquote>
<p class="last">mode (str, optional): State filling pattern. Only ‘random’ is implemented
seed (int, optional): Seed for random number generators</p>
</dd>
<dt>Returns:</dt>
<dd>initial_state (list) : the initial state</dd>
<dt>Raises:</dt>
<dd>ValueError: If fractonal fillings are incommensurate with system size.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.chi_list">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">chi_list</code><span class="sig-paren">(</span><em>chi_max</em>, <em>dchi=20</em>, <em>nsweeps=20</em>, <em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#chi_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.chi_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a ‘ramping-up’ chi_list which increases chi by dchi evry nsweeps sweeps, to a max of
chi_max.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>chi_max (int): Final value for the bond dimension
dchi (int, optional): step size of chi
nsweeps (int, optional): step size in sweeps</dd>
<dt>Returns:</dt>
<dd>chi_list (dict): list of bond dimensions for DMRG</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.inverse_permutation">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">inverse_permutation</code><span class="sig-paren">(</span><em>perm</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#inverse_permutation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.inverse_permutation" title="Permalink to this definition">¶</a></dt>
<dd><p>reverse sorting indices.</p>
<p>Sort functions (as <code class="xref py py-meth docutils literal notranslate"><span class="pre">LegCharge.sort()</span></code>) return a (1D) permutation <cite>perm</cite> array,
such that <code class="docutils literal notranslate"><span class="pre">sorted_array</span> <span class="pre">=</span> <span class="pre">old_array[perm]</span></code>.
This function inverts the permutation <cite>perm</cite>,
such that <code class="docutils literal notranslate"><span class="pre">old_array</span> <span class="pre">=</span> <span class="pre">sorted_array[inverse_permutation(perm)]</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>perm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1D array_like</span></dt>
<dd><p class="first last">the permutation to be reversed. <em>Assumes</em> that it is a permutation with unique indices.
If it is, <code class="docutils literal notranslate"><span class="pre">inverse_permutation(inverse_permutation(perm))</span> <span class="pre">==</span> <span class="pre">perm</span></code>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>inv_perm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1D array (int)</span></dt>
<dd><p class="first last">the inverse permutation of <cite>perm</cite></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.lexsort">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">lexsort</code><span class="sig-paren">(</span><em>a</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#lexsort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.lexsort" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper around <code class="docutils literal notranslate"><span class="pre">np.lexsort</span></code>: allow for trivial case <code class="docutils literal notranslate"><span class="pre">a.shape[0]</span> <span class="pre">=</span> <span class="pre">0</span></code> without sorting</p>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.list_to_dict_list">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">list_to_dict_list</code><span class="sig-paren">(</span><em>l</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#list_to_dict_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.list_to_dict_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list <cite>l</cite> of objects, construct a lookup table.</p>
<p>This function will handle duplicate entries in <cite>l</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>l: iterable of iterabele of immutable</strong></dt>
<dd><p class="first last">A list of objects that can be converted to tuples to be used as keys for a dictionary.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>lookup</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">A dictionary with (key, value) pairs <code class="docutils literal notranslate"><span class="pre">(key):[i1,i2,...]</span></code>
where <code class="docutils literal notranslate"><span class="pre">i1,</span> <span class="pre">i2,</span> <span class="pre">...</span></code> are the indices where <cite>key</cite> is found in <cite>l</cite>:
i.e. <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">==</span> <span class="pre">tuple(l[i1])</span> <span class="pre">==</span> <span class="pre">tuple(l[i2])</span> <span class="pre">==</span> <span class="pre">...</span></code></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.pad">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">pad</code><span class="sig-paren">(</span><em>a</em>, <em>w_l=0</em>, <em>v_l=0</em>, <em>w_r=0</em>, <em>v_r=0</em>, <em>axis=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad an array along a given <cite>axis</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>a</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">the array to be padded</p>
</dd>
<dt><strong>w_l</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the width to be padded in the front</p>
</dd>
<dt><strong>v_l</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dtype</span></dt>
<dd><p class="first last">the value to be inserted before <cite>a</cite></p>
</dd>
<dt><strong>w_r</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the width to be padded after the last index</p>
</dd>
<dt><strong>v_l</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dtype</span></dt>
<dd><p class="first last">the value to be inserted after <cite>a</cite></p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the axis along which to pad</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>padded</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">a copy of <cite>a</cite> with enlarged <cite>axis</cite>, padded with the given values.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.setup_executable">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">setup_executable</code><span class="sig-paren">(</span><em>mod</em>, <em>run_defaults</em>, <em>identifier_list=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#setup_executable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.setup_executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Read command line arguments and turn into useable dicts.</p>
<p>Uses default values defined at:
- model class for model_par
- here for sim_par
- executable file for run_par
Alternatively, a model_defaults dictionary and identifier_list can be supplied without the model</p>
<dl class="docutils">
<dt>NB: for setup_executable to work with a model class, the model class needs to define two things:</dt>
<dd><ul class="first last simple">
<li>defaults, a static (class level) dictionary with (key, value) pairs that have the name
of the parameter (as string) as key, and the default value as value.</li>
<li>identifier, a static (class level) list or other iterable with the names of the parameters
to be used in filename identifiers.</li>
</ul>
</dd>
<dt>Args:</dt>
<dd><p class="first">mod (model | dict): Model class (or instance) OR a dictionary containing model defaults
run_defaults (dict): default values for executable file parameters
identifier_list (ieterable, optional) | Used only if mod is a dict. Contains the identifier</p>
<blockquote class="last">
<div>variables</div></blockquote>
</dd>
<dt>Returns:</dt>
<dd>model_par, sim_par, run_par (dicts) : containing all parameters.
args | namespace with raw arguments for some backwards compatibility with executables.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.to_array">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">to_array</code><span class="sig-paren">(</span><em>a</em>, <em>shape=(None</em>, <em>)</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#to_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.to_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert <cite>a</cite> to an numpy array and tile to matching dimension/shape.</p>
<p>This function provides similar functionality as numpys broadcast, but not quite the same:
Only scalars are broadcasted to higher dimensions,
for a non-scalar, we require the number of dimension to match.
If the shape does not match, we repeat periodically, e.g. we tile <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">4)</span> <span class="pre">-&gt;</span> <span class="pre">(6,</span> <span class="pre">16)</span></code>,
but <code class="docutils literal notranslate"><span class="pre">(4,</span> <span class="pre">4)</span> <span class="pre">-&gt;</span> <span class="pre">(6,</span> <span class="pre">16)</span></code> will raise an error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>a</strong> <span class="classifier-delimiter">:</span> <span class="classifier">scalar | array_like</span></dt>
<dd><p class="first last">The input to be converted to an array. A scalar is reshaped to the desired dimension.</p>
</dd>
<dt><strong>shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple of {None | int}</span></dt>
<dd><p class="first last">The desired shape of the array. An entry <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates arbitrary len &gt;=1.
For int entries, tile the array periodically to fit the len.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>a_array</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">A copy of <cite>a</cite> converted to a numpy ndarray of desired dimension and shape.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.to_iterable">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">to_iterable</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#to_iterable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.to_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>If <cite>a</cite> is a not iterable or a string, return <code class="docutils literal notranslate"><span class="pre">[a]</span></code>, else return <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.transpose_list_list">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">transpose_list_list</code><span class="sig-paren">(</span><em>D</em>, <em>pad=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#transpose_list_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.transpose_list_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of lists T, such that <code class="docutils literal notranslate"><span class="pre">T[i][j]</span> <span class="pre">=</span> <span class="pre">D[j][i]</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>D</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of list</span></dt>
<dd><p class="first last">to be transposed</p>
</dd>
<dt><strong>pad :</strong></dt>
<dd><p class="first last">Used to fill missing places, if D is not rectangular.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>T</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of lists</span></dt>
<dd><p class="first last">transposed, rectangular version of <cite>D</cite>.
constructed such that <code class="docutils literal notranslate"><span class="pre">T[i][j]</span> <span class="pre">=</span> <span class="pre">D[j][i]</span> <span class="pre">if</span> <span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">len(D[j])</span> <span class="pre">else</span> <span class="pre">pad</span></code></p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.misc.zero_if_close">
<code class="descclassname">tenpy.tools.misc.</code><code class="descname">zero_if_close</code><span class="sig-paren">(</span><em>a</em>, <em>tol=1e-15</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/misc.html#zero_if_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.misc.zero_if_close" title="Permalink to this definition">¶</a></dt>
<dd><p>set real and/or imaginary part to 0 if their absolute value is smaller than <cite>tol</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>a</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">numpy array to be rounded</p>
</dd>
<dt><strong>tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the threashold which values to consider as ‘0’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="tenpy.tools.math.html"
                        title="previous chapter">tenpy.tools.math module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tenpy.tools.optimization.html"
                        title="next chapter">tenpy.tools.optimization module</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../userguide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tenpy.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tenpy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tenpy.algorithms.html">tenpy.algorithms package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tenpy.linalg.html">tenpy.linalg package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tenpy.models.html">tenpy.models package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tenpy.networks.html">tenpy.networks package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="tenpy.tools.html">tenpy.tools package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tenpy.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tenpy.html#module-tenpy">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.optimization.html" title="tenpy.tools.optimization module"
             >next</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.math.html" title="tenpy.tools.math module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TeNPy 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tenpy.html" >Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="tenpy.tools.html" >tenpy.tools package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2019, TeNPy Developers.
      Last updated on Mar 22, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>