
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tenpy.tools.process module &#8212; TeNPy 0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="shortcut icon" href="../_static/logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tenpy.tools.string module" href="tenpy.tools.string.html" />
    <link rel="prev" title="tenpy.tools.params module" href="tenpy.tools.params.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.string.html" title="tenpy.tools.string module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.params.html" title="tenpy.tools.params module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TeNPy 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tenpy.html" >Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="tenpy.tools.html" accesskey="U">tenpy.tools package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-tenpy.tools.process">
<span id="tenpy-tools-process-module"></span><h1>tenpy.tools.process module<a class="headerlink" href="#module-tenpy.tools.process" title="Permalink to this headline">¶</a></h1>
<p>Tools to read out total memory usage and get/set the number of threads.</p>
<p>If your python is compiled against MKL (e.g. if you use <em>anaconda</em> as recommended in INSTALL),
it will by default use as many threads as CPU cores are available.
If you run a job on a cluster, you should limit this to the number of cores you reserved –
otherwise your colleagues might get angry…
A simple way to achieve this is to set a suitable enviornment variable before calling your
python program, e.g. on the linux bash <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">OMP_NUM_THREADS=4</span></code> for 4 threads.
(MKL used OpenMP and thus respects its settings.)</p>
<p>Alternatively, this module provides <a class="reference internal" href="#tenpy.tools.process.omp_get_nthreads" title="tenpy.tools.process.omp_get_nthreads"><code class="xref py py-func docutils literal notranslate"><span class="pre">omp_get_nthreads()</span></code></a> and <a class="reference internal" href="#tenpy.tools.process.omp_set_nthreads" title="tenpy.tools.process.omp_set_nthreads"><code class="xref py py-func docutils literal notranslate"><span class="pre">omp_set_nthreads()</span></code></a>,
which give their best to get and set the number of threads at runtime,
while still being failsave if the shared OpenMP library is not found.  In the latter case,
you might also try the equivalent <a class="reference internal" href="#tenpy.tools.process.mkl_get_nthreads" title="tenpy.tools.process.mkl_get_nthreads"><code class="xref py py-func docutils literal notranslate"><span class="pre">mkl_get_nthreads()</span></code></a> and <a class="reference internal" href="#tenpy.tools.process.mkl_set_nthreads" title="tenpy.tools.process.mkl_set_nthreads"><code class="xref py py-func docutils literal notranslate"><span class="pre">mkl_set_nthreads()</span></code></a>.</p>
<dl class="function">
<dt id="tenpy.tools.process.memory_usage">
<code class="descclassname">tenpy.tools.process.</code><code class="descname">memory_usage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/process.html#memory_usage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.process.memory_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return memory usage of the running python process.</p>
<p>You can <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">psutil</span></code> if you get only <code class="docutils literal notranslate"><span class="pre">-1.</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mem</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Currently used memory in megabytes. <code class="docutils literal notranslate"><span class="pre">-1.</span></code> if no way to read out.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.process.omp_get_nthreads">
<code class="descclassname">tenpy.tools.process.</code><code class="descname">omp_get_nthreads</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/process.html#omp_get_nthreads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.process.omp_get_nthreads" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper around OpenMP <code class="docutils literal notranslate"><span class="pre">get_max_threads</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>max_threads</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The maximum number of threads used by OpenMP (and thus MKL).
<code class="docutils literal notranslate"><span class="pre">-1</span></code> if unable to read out.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.process.omp_set_nthreads">
<code class="descclassname">tenpy.tools.process.</code><code class="descname">omp_set_nthreads</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/process.html#omp_set_nthreads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.process.omp_set_nthreads" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper around OpenMP <code class="docutils literal notranslate"><span class="pre">set_nthreads</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>n</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the number of threads to use</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>success</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">whether the shared library was found and set.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.process.mkl_get_nthreads">
<code class="descclassname">tenpy.tools.process.</code><code class="descname">mkl_get_nthreads</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/process.html#mkl_get_nthreads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.process.mkl_get_nthreads" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper around MKL <code class="docutils literal notranslate"><span class="pre">get_max_threads</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>max_threads</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The maximum number of threads used by MKL. <code class="docutils literal notranslate"><span class="pre">-1</span></code> if unable to read out.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tenpy.tools.process.mkl_set_nthreads">
<code class="descclassname">tenpy.tools.process.</code><code class="descname">mkl_set_nthreads</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tenpy/tools/process.html#mkl_set_nthreads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tenpy.tools.process.mkl_set_nthreads" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper around MKL <code class="docutils literal notranslate"><span class="pre">set_num_threads</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>n</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the number of threads to use</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>success</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">whether the shared library was found and set.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="tenpy.tools.params.html"
                        title="previous chapter">tenpy.tools.params module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tenpy.tools.string.html"
                        title="next chapter">tenpy.tools.string module</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../userguide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tenpy.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tenpy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tenpy.algorithms.html">tenpy.algorithms package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tenpy.linalg.html">tenpy.linalg package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tenpy.models.html">tenpy.models package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tenpy.networks.html">tenpy.networks package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="tenpy.tools.html">tenpy.tools package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tenpy.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tenpy.html#module-tenpy">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.string.html" title="tenpy.tools.string module"
             >next</a> |</li>
        <li class="right" >
          <a href="tenpy.tools.params.html" title="tenpy.tools.params module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TeNPy 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tenpy.html" >Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="tenpy.tools.html" >tenpy.tools package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2019, TeNPy Developers.
      Last updated on Mar 20, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>