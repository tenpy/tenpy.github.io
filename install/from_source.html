
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Installation from source &#8212; TeNPy 0.5.0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="shortcut icon" href="../_static/logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Checking the installation" href="test.html" />
    <link rel="prev" title="Updating to a new version" href="updating.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="test.html" title="Checking the installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="updating.html" title="Updating to a new version"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TeNPy 0.5.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../INSTALL.html" accesskey="U">Installation instructions</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-from-source">
<h1>Installation from source<a class="headerlink" href="#installation-from-source" title="Permalink to this headline">¶</a></h1>
<div class="section" id="minimal-requirements">
<h2>Minimal Requirements<a class="headerlink" href="#minimal-requirements" title="Permalink to this headline">¶</a></h2>
<p>This code works with a minimal requirement of pure Python&gt;=3.5
and somewhat recent versions of <a class="reference external" href="http://www.numpy.org">NumPy</a> and <a class="reference external" href="http://www.scipy.org">SciPy</a>.</p>
</div>
<div class="section" id="getting-the-source">
<h2>Getting the source<a class="headerlink" href="#getting-the-source" title="Permalink to this headline">¶</a></h2>
<p>The following instructions are for (some kind of) Linux, and tested on Ubuntu.
However, the code itself should work on other operating systems as well (in particular MacOS and Windows).</p>
<p>The offical repository is at <a class="reference external" href="https://github.com/tenpy/tenpy.git">https://github.com/tenpy/tenpy.git</a>.
To get the latest version of the code, you can clone it with <a class="reference external" href="https://git-scm.com/">Git</a> using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/tenpy/tenpy.git $HOME/TeNPy
cd $HOME/TeNPy
</pre></div>
</div>
<p>Adjust <code class="docutils literal notranslate"><span class="pre">$HOME/TeNPy</span></code> to the path wherever you want to save the library.</p>
<p>Optionally, if you don’t want to contribute, you can checkout the latest stable release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">tag</span>   <span class="c1"># this prints the available version tags</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">v0</span><span class="o">.</span><span class="mf">3.0</span>  <span class="c1"># or whatever is the lastest stable version</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case you don’t have Git, you can download the repository as a ZIP archive.
You can find it under <a class="reference external" href="https://github.com/tenpy/tenpy/releases">releases</a>,
or the <a class="reference external" href="https://github.com/tenpy/tenpy/archive/master.zip">latest development version</a>.</p>
</div>
</div>
<div class="section" id="minimal-installation-including-tenpy-into-pythonpath">
<h2>Minimal installation: Including tenpy into PYTHONPATH<a class="headerlink" href="#minimal-installation-including-tenpy-into-pythonpath" title="Permalink to this headline">¶</a></h2>
<p>The python source is in the directory <cite>tenpy/</cite> of the repository.
This folder <cite>tenpy/</cite> should be placed in (one of the folders of) the environment variable
<a class="reference external" href="http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH">PYTHONPATH</a>.
On Linux, you can simply do this with the following line in the terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=$HOME/TeNPy
</pre></div>
</div>
<p>(If you have already a path in this variable, separate the paths with a colon <code class="docutils literal notranslate"><span class="pre">:</span></code>.)
However, if you enter this in the terminal, it will only be temporary for the terminal session where you entered it.
To make it permanently, you can add the above line to the file <code class="docutils literal notranslate"><span class="pre">$HOME/.bashrc</span></code>.
You might need to restart the terminal session or need to relogin to force a reload of the <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>.</p>
<p>Whenever the path is set, you should be able to use the library from within python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tenpy</span>
<span class="go">/home/username/TeNPy/tenpy/tools/optimization.py:276: UserWarning: Couldn&#39;t load compiled cython code. Code will run a bit slower.</span>
<span class="go">  warnings.warn(&quot;Couldn&#39;t load compiled cython code. Code will run a bit slower.&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tenpy</span><span class="o">.</span><span class="n">show_config</span><span class="p">()</span>
<span class="go">tenpy 0.4.0.dev0+7706003 (not compiled),</span>
<span class="go">git revision 77060034a9fa64d2c7c16b4211e130cf5b6f5272 using</span>
<span class="go">python 3.7.3 (default, Mar 27 2019, 22:11:17)</span>
<span class="go">[GCC 7.3.0]</span>
<span class="go">numpy 1.16.3, scipy 1.2.1</span>
</pre></div>
</div>
<p><a class="reference internal" href="../main.html#tenpy.show_config" title="tenpy.show_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">tenpy.show_config()</span></code></a> prints the current version of the used TeNPy library as well as the versions of the used python, numpy and scipy libraries,
which might be different on your computer. It is a good idea to save this data (given as string in <code class="docutils literal notranslate"><span class="pre">tenpy.version.version_summary</span></code> along with your data to allow to reproduce your results exactly.</p>
<p>If you got a similar output as above: congratulations! You can now run the codes :)</p>
</div>
<div class="section" id="mkl-and-further-packages">
<h2>MKL and further packages<a class="headerlink" href="#mkl-and-further-packages" title="Permalink to this headline">¶</a></h2>
<p>If you want to run larger simulations, we recommend the use of Intel’s MKL.
It ships with a Lapack library, and uses optimization for Intel CPUs.
Moreover, it uses parallelization of the LAPACK/BLAS routines, which makes execution much faster.
As of now, the library itself supports no other way of parallelization.</p>
<p>If you don’t have a python version which is built against MKL,
we recommend using the <a class="reference external" href="https://www.anaconda.com/distribution">anaconda</a> distribution, which ships with Intel MKL,
or directly <a class="reference external" href="https://software.intel.com/en-us/distribution-for-python/get-started">intelpython</a>.
Conda has the advantage that it allows to use different environments for different projects.
Both are available for Linux, Mac and Windows; note that you don’t even need administrator rights to install it on linux.
Simply follow the (straight-forward) instructions of the web page for the installation.
After a successfull installation, if you run <code class="docutils literal notranslate"><span class="pre">python</span></code> interactively, the first output line should
state the python version and contain <code class="docutils literal notranslate"><span class="pre">Anaconda</span></code> or <code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">Corporation</span></code>, respectively.</p>
<p>If you have a working conda package manager, you can install the numpy build against mkl with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">mkl</span> <span class="n">numpy</span> <span class="n">scipy</span>
</pre></div>
</div>
<p>If you prefer using a separete conda environment, you can also use the following code to install all the recommended
packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">tenpy</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MKL uses different threads to parallelize various BLAS and LAPACK routines.
If you run the code on a cluster, make sure that you specify the number of used cores/threads correctly.
By default, MKL uses all the available CPUs, which might be in stark contrast than what you required from the
cluster. The easiest way to set the used threads is using the environment variable <cite>MKL_NUM_THREADS</cite> (or <cite>OMP_NUM_THREADS</cite>).
For a dynamic change of the used threads, you might want to look at <a class="reference internal" href="../reference/tenpy.tools.process.html#module-tenpy.tools.process" title="tenpy.tools.process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">process</span></code></a>.</p>
</div>
<p>Some code uses <a class="reference external" href="http://www.matplotlib.org">MatPlotLib</a> for plotting, e.g., to visualize a lattice.
However, having matplotlib is not necessary for running any of the algorithms: tenpy does not <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">matplotlib</span></code> by default.
Further optional requirements are listed in the <code class="docutils literal notranslate"><span class="pre">requirements*.txt</span></code> files in the source repository.</p>
</div>
<div class="section" id="compilation-of-np-conserved">
<h2>Compilation of np_conserved<a class="headerlink" href="#compilation-of-np-conserved" title="Permalink to this headline">¶</a></h2>
<p>At the heart of the TeNPy library is the module <code class="xref py py-mod docutils literal notranslate"><span class="pre">tenpy.linalg.np_conseved</span></code>, which provides an Array class to exploit the
conservation of abelian charges. The data model of python is not ideal for the required book-keeping, thus
we have implemented the same np_conserved module in <a class="reference external" href="http://cython.org">Cython</a>.
This allows to compile (and thereby optimize) the corresponding python module, thereby speeding up the execution of the
code. While this might give a significant speed-up for code with small matrix dimensions, don’t expect the same speed-up in
cases where most of the CPU-time is already spent in matrix multiplications (i.e. if the bond dimension of your MPS is huge).</p>
<p>To compile the code, you first need to install <a class="reference external" href="http://cython.org">Cython</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">cython</span>                    <span class="c1"># when using anaconda, or</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">Cython</span>            <span class="c1"># when using pip</span>
</pre></div>
</div>
<p>Moreover, you need a C++ compiler.
For example, on Ubuntu you can install <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">build_essential</span></code>,
or on Windows you can download MS Visual Studio 2015.
If you use anaconda, you can also use one <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">cxx-compiler</span></code>.</p>
<p>After that, go to the root directory of TeNPy (<code class="docutils literal notranslate"><span class="pre">$HOME/TeNPy</span></code>) and simply run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">./</span><span class="nb">compile</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Note that it is not required to separately download (and install) Intel MKL: the compilation just obtains the includes
from numpy. In other words, if your current numpy version uses MKL (as the one provided by anaconda),
the compiled TeNPy code will also use it.</p>
<p>After a successful compilation, the warning that TeNPy was not compiled should go away:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tenpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tenpy</span><span class="o">.</span><span class="n">show_config</span><span class="p">()</span>
<span class="go">tenpy 0.4.0.dev0+b60bad3 (compiled from git rev. b60bad3243b7e54f549f4f7c1f074dc55bb54ba3),</span>
<span class="go">git revision b60bad3243b7e54f549f4f7c1f074dc55bb54ba3 using</span>
<span class="go">python 3.7.3 (default, Mar 27 2019, 22:11:17)</span>
<span class="go">[GCC 7.3.0]</span>
<span class="go">numpy 1.16.3, scipy 1.2.1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For further optimization options, look at <a class="reference internal" href="../reference/tenpy.tools.optimization.html#module-tenpy.tools.optimization" title="tenpy.tools.optimization"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tenpy.tools.optimization</span></code></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation from source</a><ul>
<li><a class="reference internal" href="#minimal-requirements">Minimal Requirements</a></li>
<li><a class="reference internal" href="#getting-the-source">Getting the source</a></li>
<li><a class="reference internal" href="#minimal-installation-including-tenpy-into-pythonpath">Minimal installation: Including tenpy into PYTHONPATH</a></li>
<li><a class="reference internal" href="#mkl-and-further-packages">MKL and further packages</a></li>
<li><a class="reference internal" href="#compilation-of-np-conserved">Compilation of np_conserved</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="updating.html"
                        title="previous chapter">Updating to a new version</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="test.html"
                        title="next chapter">Checking the installation</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../INSTALL.html">Installation instructions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pip.html">Installation from PyPi with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="updating.html">Updating to a new version</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="test.html">Checking the installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html">TeNPy developer team</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introductions.html">Introductions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../literature.html">Literature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../main.html">Tenpy main module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/tenpy.algorithms.html">algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tenpy.linalg.html">linalg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tenpy.models.html">models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tenpy.networks.html">networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tenpy.tools.html">tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tenpy.version.html">version</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="test.html" title="Checking the installation"
             >next</a> |</li>
        <li class="right" >
          <a href="updating.html" title="Updating to a new version"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">TeNPy 0.5.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../INSTALL.html" >Installation instructions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2019, TeNPy Developers.
      Last updated on Dec 22, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>